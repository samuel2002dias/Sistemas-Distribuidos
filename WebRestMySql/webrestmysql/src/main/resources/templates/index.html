<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="ISO-8859-1">
        <title>Departments and Profs management</title>
    </head>

    <body>
        <div>
     		<h1> Departments List </h1>
     		<a th:href="@{/showNewDepForm}"> Add Dep </a>
     		<table border="1" class="table table-striped table-responsive-md">
     			<thead>
     				<tr>
     					<th>Dep Id</th>
     					<th>Dep Name</th>
                        <th>Profs Ids</th>
     					<th> Actions </th>
     				</tr>
     			</thead>
                <tbody>
     				<tr th:each="dep : ${ListDeps}">
     					<td th:text="${dep.depId}"></td>
     					<td th:text="${dep.nome}"></td>
     					<td>
     						<div th:each="professor : ${dep.professores}">
                              <p th:text="${professor.id}"></p>
                            </div>
     					</td>
     					<td>
     						<a th:href="@{/showUpdateDepForm/{id}(id=${dep.depId})}" >Update</a>
     						<a th:href="@{/deleteDep/{id}(id=${dep.depId})}" >Delete</a>
     					</td>
     				</tr>
     			</tbody>
     		</table>
        </div>
        
        <div>
     		<h1> Professor List </h1>
     		<a th:href="@{/showNewProfForm}"> Add Prof </a>
     		<table border="1" class="table table-striped table-responsive-md">
     			<thead>
     				<tr>
     					<th>Prof Id</th>
     					<th>Prof Name</th>
     					<th>Dep Name</th>
     					<th> Actions </th>
     				</tr>
     			</thead>
                <tbody>
     				<tr th:each="prof : ${ListProfs}">
     					<td th:text="${prof.id}"></td>
     					<td th:text="${prof.name}"></td>
     					<td th:text="${prof.department != null ? prof.department.nome : 'N/A'}"></td>
     					<td>
     						<a th:href="@{/showUpdateProfForm/{id}(id=${prof.id})}" >Update</a>
     						<a th:href="@{/deleteProf/{id}(id=${prof.id})}" >Delete</a>
     					</td>
     				</tr>
     			</tbody>
     		</table>
        </div>
    </body>
</html>